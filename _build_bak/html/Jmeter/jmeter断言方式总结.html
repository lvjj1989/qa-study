<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jmeter断言方式总结 &mdash; qa study 2.0 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> qa study
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">1. 欢迎进入软件测试的世界</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/index.html">2. 功能测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interface/index.html">3. 接口测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_base/index.html">4. python基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web/index.html">5. web自动化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/index.html">6. 性能测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/index.html">7. Linux基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pytest/index.html">8. pytest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mysql/index.html">9. mysql</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jenkins/index.html">10. 持续集成Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interview_skills/index.html">11. 面试相关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/index.html">12. 联系</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">qa study</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Jmeter断言方式总结</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Jmeter/jmeter断言方式总结.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="jmeter">
<h1>Jmeter断言方式总结<a class="headerlink" href="#jmeter" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>响应断言<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p><strong>判断返回内容中的内容作用对象：响应报文中的所有对象</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_1.png"><img alt="../_images/j_1.png" src="../_images/j_1.png" style="width: 15.0cm;" /></a>
</div>
<p>APPly to:适用范围</p>
<p>Main sample and sub-samples:主要样本和次级样本，Main sample only：仅主要样本，Sub-samples only:仅次级样本，JMeter Variable:jmeter变量(输入框内可输入jmeter的变量范围)；</p>
<p>要测试的响应字段：要检查的项</p>
<p>响应文本：服务器响应文本，一般普通http响应，都勾选这个</p>
<p>Documeng(text)：测试文件，一切Apache Tika 支持服务器响应，包括文本响应，还支持 PDF, Office, Audio, Video，formats。jmeter会用Apache Tika</p>
<p>去解析服务器响应内容，会很耗内存，而且也很容易解析失败。所以一般普通http请求，不要选择这个。
URL样本：对样板的url进行断言。如果请求没有重定向（302），那么就是这个就是请求url。 如果有重定向，那么url就包含请求url 和 重定向url。</p>
<p>响应代码：http status的断言，如200，404，500等。</p>
<p>响应信息：http响应代码对应的响应信息，如：HTTP/1.1 200 Ok，HTTP/1.2 Found中的OK，Found</p>
<p>Response Headers:响应头部，如Content-Type: text/html。</p>
<p>Ignore status：忽略返回的响应报文状态码。</p>
<p><strong>模式匹配规则：</strong>
包括：返回结果包括你指定的内容，支持正则匹配。</p>
<p>匹配：
(1) 相当于 equals 。当返回值固定时，可以返回值做断言，效果和equals相同；
(2) 正则匹配 。 用正则表达式匹配返回结果，但必须全部匹配。 即正则表达式必须能匹配整个返回值，而不是返回值的一部分。</p>
<p>Equals：返回结果与指定断言完全一致。</p>
<p>Substring：返回结果包括你指定的内容，不支持正则匹配；否：不进行匹配。</p>
<p>要测试的模式:可以填写多个响应断言，通过按钮【添加】、【删除】是进行内容管理。</p>
</div>
<div class="section" id="id2">
<h2>断言持续时间<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><strong>用于判断服务器的响应时间</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_2.png"><img alt="../_images/j_2.png" src="../_images/j_2.png" style="width: 15.0cm;" /></a>
</div>
<p>APPly to:适用范围</p>
<p>Main sample and sub-samples:主要样本和次级样本</p>
<p>Main sample only：仅主要样本</p>
<p>Sub-samples only：仅次级样本</p>
<p>断言持续时间：响应时间设置（单位：毫秒），如果响应时间大于设置的响应时间，则断言失败，否则成功！</p>
<p>备注：关于应用范围，我们大多数勾选“main sample only” 就足够了，因为我们一个请求，实质上只有一个请求。但是当我们发一个请求时，可以触发多个服务器请求，类似于ajax那种，那么就有main sample  和 sub-sample之分了。此外，对于有重定向的请求，并且勾选了“跟随重定向”， 那么这两个请求都是sub-sample，重定向后的请求（第二个请求）就是main-sample</p>
</div>
<div class="section" id="size">
<h2>Size断言<a class="headerlink" href="#size" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_3.png"><img alt="../_images/j_3.png" src="../_images/j_3.png" style="width: 15.0cm;" /></a>
</div>
<p>用于判断返回内容的大小；
作用对象：返回信息，响应报文</p>
<p>APPly to:应用范围：
Main sample and sub-samples:主要样本和次级样本</p>
<p>Main sample only：仅主要样本</p>
<p>Sub-samples only:仅次级样本</p>
<p>JMeter Variable:jmeter变量(输入框内可输入jmeter的变量范围)</p>
<p>Response Size Field to Test:</p>
<p>响应字节的测试范围（可以选择用于判断的响应范围）</p>
<p>Full Response：全部响应；Response Headers:响应头部；Response</p>
<p>Body：响应主体；响应代码：响应报文相关的代码；响应信息：响应报文的信息；</p>
<p>Size to Assert:断言字节范围</p>
<p>字节大小单位为：字节</p>
</div>
<div class="section" id="xml">
<h2>XML断言<a class="headerlink" href="#xml" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_4.png"><img alt="../_images/j_4.png" src="../_images/j_4.png" style="width: 15.0cm;" /></a>
</div>
<p>XML(可扩展标记语言) 提供一种描述结构化数据的方法。与主要用于控制数据的显示和外观的 HTML 标记不同，XML 标记用于定义数据本身的结构和数据类型；</p>
<p>作用对象：判断返回结果是否和xml的格式即&lt;&gt;&lt;/&gt;成对出现</p>
</div>
<div class="section" id="xml-schema">
<h2>XML Schema 断言<a class="headerlink" href="#xml-schema" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_5.png"><img alt="../_images/j_5.png" src="../_images/j_5.png" style="width: 15.0cm;" /></a>
</div>
<p>亦可以称为XML模型断言/XML数据类型断言；XML Schema 定义了两种主要的数据类型：
1、xml document schema 文档架构 ;
2、文档架构xml-schema xml模式
作用对象：返回结果为XML概要断言的2中数据类型的消息</p>
<p>XML Schema：XML概要模型</p>
<p>File Name:文件名，写入需要断言的文件路径及名称，通常为.xsd文件，用于断言元素名称，类型和值，父子节点位置等信息</p>
</div>
<div class="section" id="html">
<h2>HTML 断言<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_6.png"><img alt="../_images/j_6.png" src="../_images/j_6.png" style="width: 15.0cm;" /></a>
</div>
<p>对响应类为XML类型的文件进行断言；
作用对象：针对sampler中的SOAP/XML-RPC Request而使用的断言</p>
<p>Tidy Settings:Tidy 环境（Tidy是一个HTML语法检查器和打印工具，可以将HTML转换为XML类型的文件）</p>
<p>Doctype：取值类型，默认取值: auto，此选项规定Tidy生成的DOCTYPE 声明. 设为 “omit” 输出不包含 DOCTYPE 声明；设为 “auto” 则依据内容作经验判断；设为 “strict”, Tidy 设置 DOCTYPE 为严格(strict) DTD； 设为 “loose”, DOCTYPE 设为 loose (transitional) DTD. 作为选择, 你可以给一个字符串作为FPI(the formal public identifier)。</p>
<p>Format：文件格式（可选择HTML/XHTML/XML三种不同类型的文件格式来检查返回内容）</p>
<p>Errors only：误差校正（能接受的最大值）</p>
<p>Error threshold：误差/错误范围（可选择误差/错误数量的范围，最大值）</p>
<p>Warning threshold：警告范围（可选择误差警告的数量范围，最大值）</p>
<p>如果勾选“Error only”这里忽略Warning，只对误差作统计检查；如果对返回内容的检查结果不超过指定结果，则断言通过，否则失败。</p>
<p>Write JTidy report to file:写入JTidy报告的文件（JTidy是Tidy的一个java移植，可以将它当成一个处理HTML文件的DOM解析器）</p>
</div>
<div class="section" id="xpath">
<h2>XPath断言<a class="headerlink" href="#xpath" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_7.png"><img alt="../_images/j_7.png" src="../_images/j_7.png" style="width: 15.0cm;" /></a>
</div>
<p>XPath即为XML路径语言，它是一种用来确定XML（标准通用标记语言的子集）文档中某部分位置的语言。XPath基于XML的树状结构，提供在数据结构树中找寻节点的能力。
作用对象：针对返回信息为XPAth的数据类型进行断言</p>
<p>Tidy Settings:Tidy 环境（Tidy是一个HTML语法检查器和打印工具，可以将HTML转换为XML类型的文件）</p>
<p>Doctype：取值类型，默认取值: auto，此选项规定Tidy生成的DOCTYPE 声明. 设为 “omit” 输出不包含 DOCTYPE 声明；设为 “auto” 则依据内容作经验判断；设为 “strict”, Tidy 设置 DOCTYPE 为严格(strict) DTD； 设为 “loose”, DOCTYPE 设为 loose (transitional) DTD. 作为选择, 你可以给一个字符串作为FPI(the formal public identifier)。</p>
<p>Format：文件格式（可选择HTML/XHTML/XML三种不同类型的文件格式来检查返回内容）</p>
<p>Errors only：误差校正（能接受的最大值）</p>
<p>Error threshold：误差/错误范围（可选择误差/错误数量的范围，最大值）</p>
<p>Warning threshold：警告范围（可选择误差警告的数量范围，最大值）</p>
<p>如果勾选“Error only”这里忽略Warning，只对误差作统计检查；如果对返回内容的检查结果不超过指定结果，则断言通过，否则失败。</p>
<p>Write JTidy report to file:写入JTidy报告的文件（JTidy是Tidy的一个java移植，可以将它当成一个处理HTML文件的DOM解析器）</p>
<p>XML Parsing Options：XML解析选项</p>
<p>Use Tidy(tolerant parser):使用Tidy（容错解析器），默认选择quiet（不显示）</p>
<p>Quiet：不显示</p>
<p>Report errors：错误报告</p>
<p>Show warnings:显示错误</p>
<p>Use Namespaces:使用名称空间</p>
<p>Validate XML:验证XML（文件包/数据）</p>
<p>Ignore Whitespace:忽略空格（这允许你指定语法分析器可以忽略哪个空格，而哪个空格是重要的）</p>
<p>Fetch external DTDs:获取外部DTDs（一些XML元素具有属性，属性包含应用程序使用的信息，属性仅在程序对元素进行读、写操作时，提供元素的额外信息，这时候需要在DTDs中声明）</p>
<p>XPath Assertion:输入框中写入xpath断言，点击Validate验证其正确性 True if nothing matches:确认都不匹配</p>
</div>
<div class="section" id="md5hex">
<h2>MD5Hex断言<a class="headerlink" href="#md5hex" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_8.png"><img alt="../_images/j_8.png" src="../_images/j_8.png" style="width: 15.0cm;" /></a>
</div>
<p>MD5是一种消息摘要算法，用以提供消息的完整性保护；
作用对象：针对参数类型为MD5Hex加密的参数的断言</p>
<p>MD5Hex：将已被MD5加密的参数写入其中，对接口响应的body做MD5Hex的校验</p>
</div>
<div class="section" id="beanshell">
<h2>BeanShell断言<a class="headerlink" href="#beanshell" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_9.png"><img alt="../_images/j_9.png" src="../_images/j_9.png" style="width: 15.0cm;" /></a>
</div>
<p>作为脚本语言，能够方便的调用java类。</p>
<p>Reset bsh.interpreter before each call:在每次调用Bean Shell之前重置bsh.interpreter类（bsh.interpreter是Bean Shell脚本语言的一种类，也可以理解为一种解析器）</p>
<p>Parameters（String Parameters and String []bsh.args）:String参数（String []bsh.args是主类main函数的形式参数,是一个String 对象数组，可以用来获取命令行用户输入进去的参数）</p>
<p>Script file：脚本文件（可以填入脚本文件路径）</p>
<p>Script（see below for variables that are defined）:参照下文定义的变量（使脚本文件参照定义的变量来运行）</p>
<p>log对象：写日志；SampleResult对象：可以从中获取响应对象，响应码等信息；Response对象：获取响应数据，只读；</p>
<p>Failure：用例判断成功与否，Boolean类型，true代表失败；FailureMessage：失败信息；ResponseCode：响应码；</p>
<p>ResponseMessage：响应信息；ResponseHeader：响应头信息；RequestHeader：请求头信息；SampleLabel：取样器Lable信息；</p>
<p>SampleData：发送给服务器的数据；Ctx：(JmeterContext)：Jmrter上下文信息，从中可以获取到线程数，线程号等信息；</p>
<p>Vars(JmeterVariables)，获取Jmeter中定义的变量，或者设置变量；</p>
<p>Props：(JmeterProperties)，获取JMeter中的属性，或者设置属性。</p>
<p>举个例子，我们可以通过以下代码，当进行接口的响应断言，并且接口响应失败时打印或者在报告中输出错误的响应:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>String response = &quot;&quot;;
String Str = &quot;\&quot;code\&quot;:0&quot;; //判断在响应中包含的内容
response = prev.getResponseDataAsString();
if (response == &quot;&quot;){
    Failure = true;
    FailureMessage = &quot;系统无响应&quot;;//会输出在报告中
    System.out.print( FailureMessage);//将结果打印到控制台，若失败率较高建议不要打印
}
else if((response.contains(Str)) == false){
    Failure = true;
    FailureMessage = &quot;接口响应异常，接口实际响应内容为：&quot; + response;//会输出在报告中
    System.out.print(FailureMessage);//将结果打印到控制台，若失败率较高建议不要打印
}
</pre></div>
</div>
</div>
<div class="section" id="bsf">
<h2>BSF断言<a class="headerlink" href="#bsf" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_10.png"><img alt="../_images/j_10.png" src="../_images/j_10.png" style="width: 15.0cm;" /></a>
</div>
<p>BSF(Bean Scripting Framework)之前也介绍过，是一个支持在Java应用程序内调用脚本语言 (Script)，并且支持脚本语言直接访问Java对象和方法的一个开源项目；
作用对象：针对sampler中的BSF sampler而使用的断言</p>
<p>Script language（e.g.beanshell,javascirpt,jexl）:脚本语言（可以从下面的下拉框中选择对应的脚本语言JavaScript、beanshell等）
parameters to be passed to script（=&gt; String Parameters and String []args）:（传递给脚本的参数→可以理解为使用BSF断言脚本时候一起引用的参数 ）
Script file（overrides script）：重写脚本（可以通过选择脚本文件的状态，是浏览调用已有的脚本还是在在下方的输入框内写入脚本；）
Script：下面的输入框表示可以输入变量类型，运用的脚本（取样结果、断言结果、取样日志文件等参数）</p>
</div>
<div class="section" id="compare-assertion">
<h2>比较断言（Compare  Assertion）<a class="headerlink" href="#compare-assertion" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_11.png"><img alt="../_images/j_11.png" src="../_images/j_11.png" style="width: 15.0cm;" /></a>
</div>
<p>这是一种比较特殊的断言元件，针对断言进行字符串替换时使用；
作用对象：需要替换的字符串</p>
<p>Select Comparison Operators:选择比较运算符</p>
<p>Compare Content:可以选择比较的内容类型（true/false或者自定义，编辑）</p>
<p>Compare Time：比较时间（可以设定比较的时间，单位为秒，默认为-1）</p>
<p>Comparison Fitters:比较修改工具</p>
<p>regular expression substitutions:替换正则表达式</p>
<p>Regex String:要替换的字符串（可从断言结果中选择）</p>
<p>substitutions：替换的字符串（替换结果）</p>
<p>用来比较两次取样结果，结果支持正在我表达式过滤。 ——比较断言会消耗很多资源，一般用于调试，不建议在压测中使用。</p>
</div>
<div class="section" id="smime">
<h2>SMIME断言<a class="headerlink" href="#smime" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_12.png"><img alt="../_images/j_12.png" src="../_images/j_12.png" style="width: 15.0cm;" /></a>
</div>
<p>SMIME是一种多用途网际邮件扩充协议，相比于之前的SMAP邮件传输协议，增加了安全性，对邮件主题进行保护；</p>
<p>作用对象：针对采用了该种邮件传输协议的信息</p>
<p>signature:签名（可选择对协议的签名验证状态）</p>
<p>Verify signature:验证签名；Message not signed:没有签名消息。</p>
<p>Signer certificate：签名证书（因为SMIME协议增加了安全传输，需要证书验证）</p>
<blockquote>
<div>No check：不检查，Check values:检查。</div></blockquote>
<p>Signer distinguished name:签名证书者名称（证书注册者的名称）</p>
<p>Sigmer email address:签名者的邮件地址（注册的邮件地址）</p>
<p>Issuer distinguished name:发行者名称（由谁发行的证书）</p>
<p>Serial Number:证书序号</p>
<p>Certificate file:选择证书文件</p>
<p>Execute assertion message at position:执行断言消息的位置（在返回消息的具体哪个位置执行断言）</p>
</div>
<div class="section" id="jsr223">
<h2>JSR223 断言<a class="headerlink" href="#jsr223" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<a class="reference internal image-reference" href="../_images/j_13.png"><img alt="../_images/j_13.png" src="../_images/j_13.png" style="width: 15.0cm;" /></a>
</div>
<p>JSR223即Java 规范请求，是指向JCP(Java Community Process)提出新增一个标准化技术规范的正式请求；
作用对象：针对sampler中的JSR223 sampler而使用的断言</p>
<p>Script language（e.g.beanshell,javascirpt,jexl）:脚本语言（可以从下面的下拉框中选择对应的脚本语言JavaScript、beanshell等）</p>
<p>parameters to be passed to script（=&gt; String Parameters and String []args）:（传递给脚本的参数→可以理解为使用JSR223断言脚本时候一起引用的参数 ）</p>
<p>Script file（overrides script）：重写脚本（可以通过选择脚本文件的状态，是浏览调用已有的脚本还是在在下方的输入框内写入脚本；）</p>
<p>Script：下面的输入框表示可以输入变量类型，运用的脚本（取样结果、断言结果、取样日志文件等参数）</p>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, lvjunjie,sunyanhui, lvjunjie84@hotmail.com.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>